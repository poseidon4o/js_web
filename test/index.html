<html>
    <head>
        <script type="text/javascript" src="../src/web.js"></script>
        <script type="text/javascript">
        var system, clock, interactive_interval;
        var PARTICLES = 1000, FPS = 25;

        var mouse_down = false, ctrl_down = false, dragged_node = null;

        function interval () {
            if (mouse_down) {
                if (ctrl_down) {
                    system.frame(false, [dragged_node.id]);
                } else {
                    system.frame(true);
                }
                dragged_node.position = system.get_mouse();
            } else {
                system.frame();
            }
            
        }

        function start() {
            clock = setInterval(interval, 1000/FPS);
        }
        function stop() {
            clearInterval(clock);
        }
        function init () {
            document.getElementById('ghub').ondragstart = function() { return false; };
            system = new system_cls('draw-field');
            start();
        }
        function reset () {
            system.reset();
        }

        function mdown() {
            mouse_down = true;
            dragged_node = system.get_node_at(system.get_mouse());
        }

        function mup() {
            mouse_down = false;
            dragged_node = null;
        }

        window.onkeydown = function(e) {
            e = e || window.event;
            e.keyCode == 17 && (ctrl_down = true);
        }

        window.onkeyup = function(e) {
            e = e || window.event;
            e.keyCode == 17 && (ctrl_down = false);
        }

        </script>
    <style>
    * {
        margin: 0;
        padding: 0;
        font-family: Segoe Ui,Helvetica Nue, Arial;
    }
    #draw-field {
        float: left;
        clear: both;
        border: 1px solid red;
        cursor: pointer;
    }
    #ghub {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    </style>
    </head>
    <body onload="javascript:init()">
        <div id="ghub" style="float:left;">
            <a href="https://github.com/poseidon4o/js_web" target="_blank" >Github</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Hold [ctrl] while draging to continue animation.
        </div>
        <canvas onmousedown="javascript:mdown();" onmouseup="javascript:mup()" onmouseout="javascript:mup()" id="draw-field"></canvas>       
    </body>
</html>
