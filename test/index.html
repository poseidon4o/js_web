<html>
    <head>
        <script type="text/javascript" src="../src/web.js"></script>
        <script type="text/javascript">
        var system, clock, interactive_interval;
        var PARTICLES = 1000, FPS = 25;
        function start() {
            clock = setInterval(function() {
                system.frame();
            }, 1000/FPS);
        }
        function stop() {
            clearInterval(clock);
        }
        function init () {
            var limit = 50;
            system = new system_cls('draw-field');
 //           system.field.nodes[parseInt(random(0, system.field.nodes.length))].poke(new vector_cls(random(-limit,limit), random(-limit,limit)));
            start();
        }
        function reset () {
            system.reset();
        }

        function mdown() {
		stop();
		var sl_node = system.get_node_at(system.get_mouse());
		if( sl_node ) {
			interactive_interval = setInterval(function() {
				sl_node.position = system.get_mouse();
				system.frame(true);
			}, 1000/FPS);
		}
	}

	function mup() {
		stop();
		clearInterval(interactive_interval);
		start();
	}


        </script>
	<style>
	* {
		margin: 0;
		padding: 0;
	}
	#draw-field {
		float: left;
		clear: both;
		border: 1px solid red;
		cursor: pointer;
	}
	</style>
    </head>
    <body onload="javascript:init()">
        <a href="https://github.com/poseidon4o/js_web" target="_blank" style="float:left;display:block;">Github</a>
        <canvas onmousedown="javascript:mdown();" onmouseup="javascript:mup()" onmouseout="javascript:mup()" id="draw-field"></canvas>       
    </body>
</html>
